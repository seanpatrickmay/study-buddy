<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Buddy</title>
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@2.0.6/css/pico.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body class="page">
    <header class="hero">
        <div>
            <h1>Study Buddy</h1>
            <p class="hero-subtitle">Build an Anki deck from PDFs, then refine it with your review history.</p>
        </div>
        <span class="badge">v2</span>
    </header>

    <main class="grid-flow">
        <article class="panel" aria-labelledby="deck-heading">
            <header class="panel-header">
                <span class="step">1</span>
                <div>
                    <h2 id="deck-heading">Build your deck</h2>
                    <p>Upload PDFs to generate flashcards and an Anki package.</p>
                </div>
            </header>

            <section class="panel-body">
                <div class="stack">
                    <label for="pdf-input" class="secondary outline file-trigger" role="button">Select study files</label>
                    <input type="file" id="pdf-input" accept=".pdf,.ppt,.pptx" multiple hidden>
                    <button type="button" class="secondary" id="pdf-clear" hidden>Clear list</button>
                    <small class="hint">Supported: PDF, PPT, PPTX Â· up to 50&nbsp;MB per file</small>
                </div>

                <ul class="file-list" id="pdf-list" aria-live="polite"></ul>

                <div class="cluster">
                    <button type="button" id="deck-run" class="contrast" disabled>Generate deck</button>
                    <span class="spinner" id="deck-loader" hidden aria-hidden="true"></span>
                </div>

                <progress id="deck-progress" class="progress" value="0" max="100" hidden></progress>

                <p class="status" id="deck-feedback" aria-live="polite"></p>

                <div class="cluster wrap">
                    <a id="deck-download" class="secondary outline" role="button" hidden>Download Anki deck (.apkg)</a>
                    <a id="flashcards-download" class="secondary outline" role="button" hidden>Download flashcards (.json)</a>
                    <a id="deck-cheatsheet-tex" class="secondary outline" role="button" hidden>Download cheat sheet (.tex)</a>
                    <a id="deck-cheatsheet-pdf" class="secondary outline" role="button" hidden>Download cheat sheet (.pdf)</a>
                </div>
            </section>
        </article>

        <article class="panel" aria-labelledby="anki-heading">
            <header class="panel-header">
                <span class="step">2</span>
                <div>
                    <h2 id="anki-heading">Refine with Anki</h2>
                    <p>Upload your Anki export to receive a difficulty-aware cheat sheet.</p>
                </div>
            </header>

            <section class="panel-body">
                <div class="stack">
                    <label for="anki-input" class="secondary outline file-trigger" role="button">Select Anki export</label>
                    <input type="file" id="anki-input" accept=".apkg" hidden>
                    <button type="button" class="secondary" id="anki-clear" hidden>Remove file</button>
                    <small class="hint">Export from Anki with scheduling information included.</small>
                    <small class="file-pill" id="anki-file" hidden></small>
                </div>

                <div class="cluster">
                    <button type="button" id="anki-run" class="contrast" disabled>Generate cheat sheet</button>
                    <span class="spinner" id="anki-loader" hidden aria-hidden="true"></span>
                </div>

                <progress id="anki-progress" class="progress" value="0" max="100" hidden></progress>

                <p class="status" id="anki-feedback" aria-live="polite"></p>

                <div class="cluster wrap">
                    <a id="anki-cheatsheet-tex" class="secondary outline" role="button" hidden>Download cheat sheet (.tex)</a>
                    <a id="anki-cheatsheet-pdf" class="secondary outline" role="button" hidden>Download cheat sheet (.pdf)</a>
                </div>
            </section>
        </article>
    </main>

    <footer class="footer">
        <p>Uploads are temporary; generated artefacts are saved to <code>./outputs</code>.</p>
    </footer>

    <script src="/static/js/app.js"></script>
</body>
</html>
